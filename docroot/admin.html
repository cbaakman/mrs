<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE xhtml
	PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/1999/xhtml">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:mrs="http://mrs.cmbi.ru.nl/mrs-web/ml"
	xml:lang="en" lang="en">
<head>
    <title>M6 Administration</title>

    <meta name="author" content="Maarten L. Hekkelman" />
    <meta name="generator" content="Japi" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

	<link rel="stylesheet" type="text/css" href="css/mrs-style.css" />
	<link rel="stylesheet" type="text/css" href="css/jquery-ui.css" />

	<script src="scripts/jquery.js" type="text/javascript">
	</script>
	
	<script src="scripts/jquery-ui.js" type="text/javascript">
	</script>
	
	<script src="scripts/mrs.js" type="text/javascript">
	</script>

	<script src="scripts/admin.js" type="text/javascript">
	</script>

</head>
<body>
	<mrs:include file="menu.html" />
	<div id="main">
		<mrs:include file="form.html" />
		<div class="nav">
			<ul>
				<li><a href="#" id="global" onclick="Admin.changeStatsView('global');">Main</a></li>
				<li><a href="#" id="servers" onclick="Admin.changeStatsView('servers');">Servers</a></li>
				<li><a href="#" id="parsers" onclick="Admin.changeStatsView('parsers');">Parsers</a></li>
				<li><a href="#" id="formats" onclick="Admin.changeStatsView('formats');">Formats</a></li>
				<li><a href="#" id="databanks" onclick="Admin.changeStatsView('databanks');">Databanks</a></li>
				<li><a href="#" id="blast" onclick="Admin.changeStatsView('blast');">Blast</a></li>
			</ul>
		</div>

		<div class="admin">
			<div id="global" class="section">
				<form id="global-${db.id}" class="admin_form" method="POST">
					<input type='hidden' name='submit' value='global'/>
					<fieldset>
						<h3>Directories</h3>
						<div><label>MRS-file directory</label><input type="text" value="${global.mrsdir}" name="mrsdir"/></div>
						<div><label>Raw directory</label><input type="text" value="${global.rawdir}" name="rawdir"/></div>
						<div><label>Parser directory</label><input type="text" value="${global.parserdir}" name="parserdir"/></div>
						<h3>Tools</h3>
						<div><label>Clustal Omega</label><input type="text" value="${global.tools.clustalo}" name="clustalo"/></div>
						<hr/>
						<input type='submit'/><input type='reset'/>
					</fieldset>
				</form>
			</div>
	
			<div id="servers" class="section">
				<div class="admin-left">
					<table cellspacing="0" cellpadding="0" class="select_db">
						<caption>Servers</caption>
						<mrs:iterate collection="servers" var="server">
							<tr id="${server.addr}:${server.port}"><td>${server.addr}:${server.port}</td></tr>
						</mrs:iterate>
					</table>
				</div>
				
				<div class="admin-right">
				<mrs:iterate collection="servers" var="server">
					<form id="server-${server.addr}:${server.port}" class="admin_form" method="POST">
						<input type='hidden' name='submit' value='server'/>
						<fieldset>
							<h3>Server configuration</h3>
							<div><label>Address</label><input type="text" value="${server.addr}" name="addr"/></div>
							<div><label>Port</label><input type="text" value="${server.port}" name="port"/></div>
							<div><label>Base URL</label><input type="text" value="${server.baseurl}" name="baseurl"/></div>
							
							
							<hr/>
							<input type='submit'/><input type='reset'/>
						</fieldset>
					</form>
				</mrs:iterate>
				</div>
				
				<div class="admin-clear" />
			</div>
			
			<div id="parsers" class="section" />
			<div id="formats" class="section" />
	
			<div id="databanks" class="section">
				<div class="admin-left">
					<table cellspacing="0" cellpadding="0" class="select_db">
						<caption>Databanks</caption>
						<mrs:iterate collection="databanks" var="db">
							<tr id="${db.id}"><td>${db.id}</td></tr>
						</mrs:iterate>
					</table>
				</div>
				
				<div class="admin-right">
				<mrs:iterate collection="databanks" var="db">
					<form id="databank-${db.id}" class="admin_form" method="POST" style="display:none">
						<fieldset>
							<h3>Databank configuration</h3>
							<input type='hidden' name='submit' value='databank'/>
							<div><label>ID</label><input type="text" value="${db.id}" name="id"/></div>
							<div><label>Name</label><input type="text" value="${db.name}" name="name"/></div>
							<div><label>Info URL</label><input type="text" value="${db.info}" name="info"/></div>
							<div><label>Parser</label><select name="parser">
									<mrs:options collection="parsers" selected="${db.parser}"/>
								</select>
							</div>
							<div><label>Formatter</label><select name="format">
									<option>No format</option>
									<mrs:options collection="formats" selected="${db.format}"/>
								</select>
							</div>
							<div><label>Source files</label><input type="text" value="${db.source}" name="source"/></div>
							<div><label>Upstream URL</label><input type="text" value="${db.fetch.src}" name="fetch"/></div>
							<div><label>Delete stale files</label><mrs:checkbox name="delete" checked="${db.fetch.delete}"/></div>
							<hr/>
							<input type='submit'/><input type='reset'/>
						</fieldset>
					</form>
					
				</mrs:iterate>
				</div>
				
				<div class="admin-clear" />
			</div>
	
			<div id="blast" class="section" />
		
		</div>
	</div>
</body>
</html>
